<!DOCTYPE html>
<html>
<head>
    <title>Certificate Verification</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 300% 300%;
            animation: gradientMove 8s ease infinite;
        }

        @keyframes gradientMove {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }

        .card {
            width: 360px;
            padding: 30px;
            border-radius: 20px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(15px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            color: #fff;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(20px);}
            to {opacity: 1; transform: translateY(0);}
        }

        h2 {
            margin-bottom: 10px;
        }

        #loader {
            margin-bottom: 10px;
            font-size: 14px;
            opacity: 0.8;
        }

        .valid {
            color: #00ff88;
            font-weight: bold;
            font-size: 18px;
        }

        .invalid {
            color: #ff4d4d;
            font-weight: bold;
            font-size: 18px;
        }

        .info {
            margin-top: 15px;
            text-align: left;
        }

        .row {
            margin: 8px 0;
        }

        .label {
            font-weight: bold;
            opacity: 0.9;
        }

        .value {
            float: right;
        }

        .footer {
            margin-top: 20px;
            font-size: 12px;
            opacity: 0.7;
        }

    </style>
</head>

<body>

<div class="card">

    <h2>üìú Certificate Verification</h2>

    <div id="loader">Loading certificate...</div>

    <h3 id="status"></h3>

    <div class="info">
        <div class="row"><span class="label">Name</span> <span class="value" id="name"></span></div>
        <div class="row"><span class="label">Course</span> <span class="value" id="course"></span></div>
        <div class="row"><span class="label">Score</span> <span class="value" id="score"></span>%</div>
        <div class="row"><span class="label">Date</span> <span class="value" id="date"></span></div>
        <div class="row"><span class="label">Certificate ID</span> <span class="value" id="cid"></span></div>
    </div>

    <div class="footer">‚úî Verified by CoursBit</div>

</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>

// Firebase Config
var firebaseConfig = {
  apiKey: "AIzaSyDETQ1TEOwfssNt4jIRslNDy88f3z14KUo",
  authDomain: "skillverify-594e5.firebaseapp.com",
  databaseURL: "https://skillverify-594e5-default-rtdb.firebaseio.com",
  projectId: "skillverify-594e5",
  storageBucket: "skillverify-594e5.firebasestorage.app",
  messagingSenderId: "658017096267",
  appId: "1:658017096267:web:5c5a6bc8c7613018a833ce"
};

firebase.initializeApp(firebaseConfig);

const loader = document.getElementById("loader");
const statusEl = document.getElementById("status");

const params = new URLSearchParams(window.location.search);
const id = params.get("key");

if (!id) {
    loader.innerText = "";
    statusEl.innerText = "Invalid Request ‚ùå";
    statusEl.className = "invalid";
} else {

    firebase.database().ref("certificates/" + id).once("value")
    .then(snapshot => {

        loader.style.display = "none";

        if (!snapshot.exists()) {
            statusEl.innerText = "Invalid Certificate ‚ùå";
            statusEl.className = "invalid";
            return;
        }

        let cert = snapshot.val();

        statusEl.innerText = "Valid Certificate ‚úî";
        statusEl.className = "valid";

        document.getElementById("name").innerText = cert.name || "-";
        document.getElementById("course").innerText = cert.course || "-";
        document.getElementById("score").innerText = cert.percentage || "0";
        document.getElementById("cid").innerText = id;

        let date = new Date(cert.issuedAt);
        document.getElementById("date").innerText = date.toDateString();

    })
    .catch(error => {
        loader.style.display = "none";
        statusEl.innerText = "Error loading certificate ‚ùå";
        statusEl.className = "invalid";
        console.error(error);
    });
}

</script>

</body>
</html>
